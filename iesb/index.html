<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>Calculadora IESB</title>
	
	<style>
		*, *::before, *::after {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}

		body {
			width: 100%;
			height: 100vh;
			background: #eee;
			display: flex;
			justify-content: center;
			align-items: center;
		}

		.container {
			background: rgb(237, 34, 65);
			color: #eee;
		}
	
		.toggle input {
			display: none;
		}

		.toggle label{
			width: 48px;
			height: 26px;
			background: #8D909B;
			position: relative;
			display: block;
			border-radius: 16px;
			cursor: pointer;
			transition: all ease-in-out 300ms;
		}

		.toggle label::before {
			content:'';
			background-color: #EEF0F2;
			position: absolute;
			display: block;
			margin: 2px;
			width: 22px;
			height: 22px;
			border-radius: 50%;
			transition: all ease-in-out 300ms;
			right: 100%;
			transform: translateX(calc(100% + 4px))
		}

		.toggle input:checked ~ label{
			background: #08A045;
		}

		.toggle input:checked ~ label::before{
			right: 0;
			transform: translateX(0)
		}
	</style>

</head>

<body>
    <div id="app">

		<div class="container">
			<h1>Calculadora IESB:</h1>

			<div class="col">
				<h2>Digite aqui as suas notas:</h2>
				<div class="input-group">
					<label for="p1">Nota P1:</label>
					<input type="number" min="0" max="10" id="p1" v-model="p1">
				</div>
				<div class="input-group">
					<label for="p2">Nota P2:</label>
					<input type="number" min="0" max="10" id="p2" v-model="p2">
				</div>

				<div class="has-edad">
					<h2>EDAD:</h2>
					<div class="toggle">
						<input type="checkbox" id="checkbox" v-model="hasEdad">
						<label for="checkbox"></label>
					</div>
				</div>

				<div v-if="hasEdad" class="input-group">
					<label for="edad">Nota EDAD:</label>
					<input type="number" min="0" max="10" id="edad" v-model="edad">
				</div>
			</div>

			<div class="col">
				<h1>Resultados:</h1>

				<div v-if="p2 == 0" class="res">
					<h2>Nota necessária na P2 para ser aprovado: </h2>
					<strong>{{ calcP2 }}</strong>
					<small>Você não pode fazer a P3 caso tire 0 na P2!</small>
				</div>

				<div v-else class="res">
					<h2>Nota necessária na P3 para ser aprovado: </h2>
					<strong>{{ calcP3 }}</strong>
				</div>
			</div>
		</div>
	</div>
	<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>

	<script>
		var vm = new Vue({
            el: "#app",
            data () {
                return {
					p1: 0,
					p2: 0,
					edad: 0,
					hasEdad: false,
                }
            },
            computed: {
                calcP2 () {
					let nota = 0
					
					nota = ((this.p1 * .4 * -1) + 5) / .6
					if (this.hasEdad)
						nota = ((this.p1 * .4 * -1) + 5 + (this.edad * .03 * -1)) / .57
					
					if (nota >= 0)
						return parseFloat(nota.toFixed(2));
					return 0
                },
                calcP3 () {
					let nota1, nota2, nota;
					
					nota1 = ((this.p1 * .4 * -1) + 5) / .6
					if (this.hasEdad)
						nota1 = ((this.p1 * .4 * -1) + 5 + (this.edad * .03 * -1)) / .57
					
					
					nota2 = ((this.p2 * .6 * -1) + 5) / .4
					if (this.hasEdad)
						nota2 = ((this.p2 * .57 * -1) + 5 + (this.edad * .03 * -1)) / .4
					
					nota = nota1 > nota2 ? parseFloat(nota1.toFixed(2)) : parseFloat(nota2.toFixed(2))
					if (nota1 > 5 || nota2 > 5)
						nota = nota1 < nota2 ? parseFloat(nota1.toFixed(2)) : parseFloat(nota2.toFixed(2))
					
					return nota >= 0 ? nota : 0;
                },
                subs () {
					let nota1, nota2;
					
					nota1 = ((this.p1 * .4 * -1) + 5) / .6
					if (this.hasEdad)
						nota1 = ((this.p1 * .4 * -1) + 5 + (this.edad * .03 * -1)) / .57
					
					
					nota2 = ((this.p2 * .6 * -1) + 5) / .4
					if (this.hasEdad)
						nota2 = ((this.p2 * .57 * -1) + 5 + (this.edad * .03 * -1)) / .4
					
					
					if (nota1 > 5 || nota2 > 5)
						return nota1 < nota2 ? "2" : "1"
					return nota1 > nota2 ? "2" : "1"
                },
                res () {
					let nota = (this.p1 * .4) + (this.p2 * .6);
					if (this.hasEdad)
						nota = (this.p1 * .4) + (this.p2 * .57) + (this.edad * .03);
					
					return parseFloat(nota.toFixed(2));
                
                }
            }
		})
	</script>
</body>
</html>